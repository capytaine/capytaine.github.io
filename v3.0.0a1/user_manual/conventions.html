<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Conventions and differences to other codes &#8212; capytaine 3.0.0a1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=27fed22d" />
    <link rel="stylesheet" type="text/css" href="../_static/proof.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <script src="../_static/documentation_options.js?v=840a91ac"></script>
    <script src="../_static/doctools.js?v=fd6eb6e6"></script>
    <script src="../_static/sphinx_highlight.js?v=6ffebe34"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@4/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Common issues" href="fixing_issues.html" />
    <link rel="prev" title="Export outputs" href="export_output.html" />
    <script defer data-domain="capytaine.github.io" src="https://plausible.io/js/script.js"></script>
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  


  </head><body>
  

    <div class="document">
<div id="new-doc-warning-banner" style="width:100%; background-color:#ADD8E6; text-align: center;">This page is part of the documentation of the development version 3.0.0a1 of Capytaine.<br><a href="https://capytaine.github.io/stable/">Latest stable version is available here.</a></div>
    
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="conventions-and-differences-to-other-codes">
<h1>Conventions and differences to other codes<a class="headerlink" href="#conventions-and-differences-to-other-codes" title="Link to this heading">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To be expanded.</p>
</div>
<p>Unlike most other codes, angles (such as the incoming wave direction) are given in radians in Capytaine.</p>
<section id="with-respect-to-wamit">
<h2>With respect to WAMIT<a class="headerlink" href="#with-respect-to-wamit" title="Link to this heading">¶</a></h2>
<p>In this section, the index <span class="math notranslate nohighlight">\(W\)</span> denotes a magnitude in <a class="reference external" href="https://www.wamit.com/">WAMIT</a> convention. Other magnitudes use Capytaine convention.</p>
<section id="time-dependency">
<h3>Time dependency<a class="headerlink" href="#time-dependency" title="Link to this heading">¶</a></h3>
<p>In Capytaine, the complex-valued amplitudes (phasors) are defined with the convention</p>
<div class="math notranslate nohighlight" id="equation-time-convention-in-capytaine">
<span class="eqno">(2)<a class="headerlink" href="#equation-time-convention-in-capytaine" title="Link to this equation">¶</a></span>\[x(t) = \Re ( X e^{-i \omega t}).\]</div>
<p>It is unlike WAMIT in which the following convention is used</p>
<div class="math notranslate nohighlight" id="equation-user-manual-conventions-0">
<span class="eqno">(3)<a class="headerlink" href="#equation-user-manual-conventions-0" title="Link to this equation">¶</a></span>\[x(t) = \Re ( X_W e^{+ i \omega t})\]</div>
</section>
<section id="incoming-potential">
<h3>Incoming potential<a class="headerlink" href="#incoming-potential" title="Link to this heading">¶</a></h3>
<p>In deep water, the potential of the incoming undisturbed velocity field reads in Capytaine</p>
<div class="math notranslate nohighlight" id="equation-incoming-waves-in-capytaine">
<span class="eqno">(4)<a class="headerlink" href="#equation-incoming-waves-in-capytaine" title="Link to this equation">¶</a></span>\[\Phi_0 = -i \frac{g}{\omega} e^{k z} e^{i k (x \cos \beta + y \sin \beta)},\]</div>
<p>whereas in WAMIT (equation 15.4 of WAMIT Manual v7.2), it reads</p>
<div class="math notranslate nohighlight" id="equation-user-manual-conventions-1">
<span class="eqno">(5)<a class="headerlink" href="#equation-user-manual-conventions-1" title="Link to this equation">¶</a></span>\[\Phi_{0, W} = - \overline{\Phi_0} = i \frac{g}{\omega} e^{k z} e^{- i k (x \cos \beta + y \sin \beta)},\]</div>
<p>and similarly in finite depth.</p>
<p>It follows that the incoming velocity field from Capytaine <span class="math notranslate nohighlight">\(u_0 = \nabla \Phi_0\)</span> is related to the incoming velocity field from WAMIT <span class="math notranslate nohighlight">\(u_{0, W} = \nabla \Phi_{0, W}\)</span> as</p>
<div class="math notranslate nohighlight" id="equation-user-manual-conventions-2">
<span class="eqno">(6)<a class="headerlink" href="#equation-user-manual-conventions-2" title="Link to this equation">¶</a></span>\[u_0 = \overline{u_{0, W}}.\]</div>
<p>Then the corresponding Froude-Krylov force and diffraction force (also called scattering force in WAMIT), as well as their sum the excitation force, are complex-conjugate between Capytaine and WAMIT:</p>
<div class="math notranslate nohighlight" id="equation-user-manual-conventions-3">
<span class="eqno">(7)<a class="headerlink" href="#equation-user-manual-conventions-3" title="Link to this equation">¶</a></span>\[F_e = \overline{F_{e, W}}\]</div>
</section>
<section id="normal-vector">
<h3>Normal vector<a class="headerlink" href="#normal-vector" title="Link to this heading">¶</a></h3>
<p>In its theory manual and related publications, WAMIT considers a normal vector on the hull that is oriented towards the inside of the floating body.
In Capytaine, the normal vector on the hull is oriented towards the outside of the floating body.</p>
</section>
<section id="green-function-and-source-distribution">
<h3>Green function and source distribution<a class="headerlink" href="#green-function-and-source-distribution" title="Link to this heading">¶</a></h3>
<p>In its theory manual and related publications, WAMIT defines the Green function as</p>
<div class="math notranslate nohighlight" id="equation-user-manual-conventions-4">
<span class="eqno">(8)<a class="headerlink" href="#equation-user-manual-conventions-4" title="Link to this equation">¶</a></span>\[G_W(x, \xi) = \frac{1}{|x - \xi|} + ...\]</div>
<p>whereas in Capytaine, the Green function is defined as</p>
<div class="math notranslate nohighlight" id="equation-user-manual-conventions-5">
<span class="eqno">(9)<a class="headerlink" href="#equation-user-manual-conventions-5" title="Link to this equation">¶</a></span>\[G(x, \xi) = \frac{-1}{4\pi} \left( \frac{1}{|x - \xi|} + ... \right) = \frac{- G_W(x, \xi)}{4\pi}\]</div>
<p>Similarly, the source distribution follows a different convention than in Capytaine:</p>
<div class="math notranslate nohighlight" id="equation-user-manual-conventions-6">
<span class="eqno">(10)<a class="headerlink" href="#equation-user-manual-conventions-6" title="Link to this equation">¶</a></span>\[\sigma_W = -\frac{\sigma}{4 \pi}.\]</div>
<p>Together with the convention on the normal vector mentioned above, it results in a slightly different expression for the boundary integral expression.</p>
</section>
</section>
<section id="with-respect-to-nemoh-and-aquadyn">
<h2>With respect to Nemoh and Aquadyn<a class="headerlink" href="#with-respect-to-nemoh-and-aquadyn" title="Link to this heading">¶</a></h2>
<p>Capytaine mostly follows the same conventions as <a class="reference external" href="https://gitlab.com/lheea/Nemoh">Nemoh</a>, which are also the same as in Aquadyn.
One exception is the phase angle of the excitation force in Nemoh and Capytaine is the opposite of the one in Aquadyn.</p>
<p>Radiation problems are scaled differently in Capytaine and in Nemoh.
In Nemoh, the boundary condition is taken as the displacement of the panel, that is for instance for surge:</p>
<div class="math notranslate nohighlight" id="equation-user-manual-conventions-7">
<span class="eqno">(11)<a class="headerlink" href="#equation-user-manual-conventions-7" title="Link to this equation">¶</a></span>\[\frac{\partial \phi}{\partial n} = n_x\]</div>
<p>In Capytaine (version 2 and above), the boundary condition is taken as the velocity of the panel, that is for the same example:</p>
<div class="math notranslate nohighlight" id="equation-user-manual-conventions-8">
<span class="eqno">(12)<a class="headerlink" href="#equation-user-manual-conventions-8" title="Link to this equation">¶</a></span>\[\frac{\partial \phi}{\partial n} = -i \omega n_x\]</div>
<p>which is closer to the correct physical meaning.
Nemoh’s choice is most likely to allow the resolution in the edge cases $omega = 0$ and $omega = infty$, while Capytaine uses another approach to handle these cases.
The expression for the added mass and radiation damping are adjusted accordingly in Nemoh, so the results of Capytaine and Nemoh should match.
However, so intermediate results (pressure on hull) and post-processing (free surface elevation, kochin functions) are missing a <span class="math notranslate nohighlight">\(-i\omega\)</span> factor in Nemoh, which they have in Capytaine.</p>
<p>Scaling of diffraction problems is the same in both codes.</p>
</section>
<section id="with-respect-to-hams">
<h2>With respect to HAMS<a class="headerlink" href="#with-respect-to-hams" title="Link to this heading">¶</a></h2>
<p><a class="reference external" href="https://github.com/YingyiLiu/HAMS">HAMS</a> follows the same conventions <a class="reference internal" href="#equation-time-convention-in-capytaine">(2)</a> and <a class="reference internal" href="#equation-incoming-waves-in-capytaine">(4)</a> as Capytaine, but in its documentation follows the same convention as WAMIT for normal vectors and Green function.</p>
</section>
<section id="with-respect-to-orcawave">
<h2>With respect to OrcaWave<a class="headerlink" href="#with-respect-to-orcawave" title="Link to this heading">¶</a></h2>
<p>OrcaWave follows the same conventions as WAMIT.</p>
</section>
<section id="with-respect-to-hydrostar">
<h2>With respect to Hydrostar<a class="headerlink" href="#with-respect-to-hydrostar" title="Link to this heading">¶</a></h2>
<p>From (Donatini et al., 2022) <a class="reference internal" href="../theory_manual/bibliography.html#d22" id="id1"><span>[D22]</span></a>:</p>
<ul class="simple">
<li><p>Hydrostar provided phases as a phase lead, while Capytaine outputs the phase lag.</p></li>
<li><p>The phase of the incident waves is set such that the maximum is reached at <span class="math notranslate nohighlight">\(t=0\)</span> at different points: in Capytaine, the reference point is <span class="math notranslate nohighlight">\((0, 0, 0)\)</span>, whereas in Hydrostar it is the center of buoyancy of the floating body by default.</p></li>
</ul>
</section>
</section>


          </div>
          
        </div>
      </div>

      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">capytaine</a></h1>



<p class="blurb">a Python-based linear potential flow BEM solver</p>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../features.html">Features</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">User manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="installation.html">Installation for users</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="mesh.html">Meshes</a></li>
<li class="toctree-l2"><a class="reference internal" href="body.html">Floating body</a></li>
<li class="toctree-l2"><a class="reference internal" href="multibody.html">Multiple bodies</a></li>
<li class="toctree-l2"><a class="reference internal" href="hydrostatics.html">Hydrostatics</a></li>
<li class="toctree-l2"><a class="reference internal" href="symmetries.html">Mesh symmetries</a></li>
<li class="toctree-l2"><a class="reference internal" href="problem_setup.html">Setting up a problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="resolution.html">Resolution</a></li>
<li class="toctree-l2"><a class="reference internal" href="post_pro.html">Post-processing and collection in dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="export_output.html">Export outputs</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Conventions and differences to other codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="fixing_issues.html">Common issues</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Example scripts</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../developer_manual/index.html">Developer manual</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../theory_manual/index.html">Theory manual</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../citing.html">Citing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">User manual</a><ul>
      <li>Previous: <a href="export_output.html" title="previous chapter">Export outputs</a></li>
      <li>Next: <a href="fixing_issues.html" title="next chapter">Common issues</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2024, Matthieu Ancellin.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 9.1.0</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../_sources/user_manual/conventions.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>
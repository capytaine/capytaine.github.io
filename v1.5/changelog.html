
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Changelog &#8212; capytaine 1.5 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="_static/proof.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/proof.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Citing" href="citing.html" />
    <script defer data-domain="capytaine.github.io" src="https://plausible.io/js/script.js"></script>
    <jinja2.runtime.BlockReference object at 0x7fb54b3a73a0>

  </head><body>
<div id="old-doc-warning-banner" style="width:100%; background-color:#F0E68C; text-align: center;">This page is part of the documentation of an old version of Capytaine. <a href="https://capytaine.github.io/stable/">Latest stable version is available here.</a></div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="changelog">
<h1>Changelog<a class="headerlink" href="#changelog" title="Permalink to this heading">¶</a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#new-in-version-1-5-2022-12-13" id="id24">New in version 1.5 (2022-12-13)</a></p></li>
<li><p><a class="reference internal" href="#new-in-version-1-4-2-2022-10-03" id="id25">New in version 1.4.2 (2022-10-03)</a></p></li>
<li><p><a class="reference internal" href="#new-in-version-1-4-1-2022-09-05" id="id26">New in version 1.4.1 (2022-09-05)</a></p></li>
<li><p><a class="reference internal" href="#new-in-version-1-4-2022-07-07" id="id27">New in version 1.4 (2022-07-07)</a></p></li>
<li><p><a class="reference internal" href="#new-in-version-1-3-2021-10-07" id="id28">New in version 1.3 (2021-10-07)</a></p></li>
<li><p><a class="reference internal" href="#new-in-version-1-2-1-2021-04-14" id="id29">New in version 1.2.1 (2021-04-14)</a></p></li>
<li><p><a class="reference internal" href="#new-in-version-1-2-2020-04-24" id="id30">New in version 1.2 (2020-04-24)</a></p></li>
<li><p><a class="reference internal" href="#new-in-version-1-1-2019-09-24" id="id31">New in version 1.1 (2019-09-24)</a></p></li>
<li><p><a class="reference internal" href="#new-in-version-1-0-1-2019-03-28" id="id32">New in version 1.0.1 (2019-03-28)</a></p></li>
<li><p><a class="reference internal" href="#new-in-version-1-0-2019-03-14" id="id33">New in version 1.0 (2019-03-14)</a></p></li>
<li><p><a class="reference internal" href="#new-in-version-0-6-2019-02-11" id="id34">New in version 0.6 (2019-02-11)</a></p></li>
<li><p><a class="reference internal" href="#new-in-version-0-5-1-2018-10-17" id="id35">New in version 0.5.1 (2018-10-17)</a></p></li>
<li><p><a class="reference internal" href="#new-in-version-0-5-2018-09-18" id="id36">New in version 0.5 (2018-09-18)</a></p></li>
<li><p><a class="reference internal" href="#new-in-version-0-4-2018-08-04" id="id37">New in version 0.4 (2018-08-04)</a></p></li>
</ul>
</nav>
<section id="new-in-version-1-5-2022-12-13">
<h2>New in version 1.5 (2022-12-13)<a class="headerlink" href="#new-in-version-1-5-2022-12-13" title="Permalink to this heading">¶</a></h2>
<section id="major-changes">
<h3>Major changes<a class="headerlink" href="#major-changes" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>The <a class="reference internal" href="developer_manual/api/capytaine.green_functions.delhommeau.html#capytaine.green_functions.delhommeau.XieDelhommeau" title="capytaine.green_functions.delhommeau.XieDelhommeau"><code class="xref py py-class docutils literal notranslate"><span class="pre">XieDelhommeau</span></code></a> implementation of the Green function has been improved.
The implementation used to be almost the same as the default <a class="reference internal" href="developer_manual/api/capytaine.green_functions.delhommeau.html#capytaine.green_functions.delhommeau.Delhommeau" title="capytaine.green_functions.delhommeau.Delhommeau"><code class="xref py py-class docutils literal notranslate"><span class="pre">Delhommeau</span></code></a> method.
A missing key element has been added and the <a class="reference internal" href="developer_manual/api/capytaine.green_functions.delhommeau.html#capytaine.green_functions.delhommeau.XieDelhommeau" title="capytaine.green_functions.delhommeau.XieDelhommeau"><code class="xref py py-class docutils literal notranslate"><span class="pre">XieDelhommeau</span></code></a> is now actually more accurate near the free surface.
(<a class="reference external" href="https://github.com/capytaine/capytaine/pull/180">PR180</a> and <a class="reference external" href="https://github.com/capytaine/capytaine/pull/216">PR216</a>)</p></li>
<li><p>New default linear solver <a class="reference internal" href="developer_manual/api/capytaine.matrices.linear_solvers.html#capytaine.matrices.linear_solvers.LUSolverWithCache" title="capytaine.matrices.linear_solvers.LUSolverWithCache"><code class="xref py py-class docutils literal notranslate"><span class="pre">LUSolverWithCache</span></code></a>: the LU decomposition of the matrix is now cached to be reused for other similar problems, diminishing the total computation time up to 40%. (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/235">PR235</a>)</p></li>
<li><p>New functions to generate simple geometric meshes have been implemented in <code class="code docutils literal notranslate"><span class="pre">capytaine.meshes.predefined</span></code>. They are similar to the former geometric bodies (<code class="xref py py-class docutils literal notranslate"><span class="pre">Sphere</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">HorizontalCylinder</span></code>, etc.), except that they return a mesh and do not create a <code class="code docutils literal notranslate"><span class="pre">FloatingBody</span></code>. The geometric body classes are considered deprecated, although they should still work as expected. (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/233">PR233</a>)</p></li>
<li><p>Changed the behavior of <a class="reference internal" href="developer_manual/api/capytaine.bodies.bodies.html#capytaine.bodies.bodies.FloatingBody.compute_hydrostatics" title="capytaine.bodies.bodies.FloatingBody.compute_hydrostatics"><code class="xref py py-meth docutils literal notranslate"><span class="pre">compute_hydrostatics()</span></code></a>. The mesh is not silently modified anymore. The stiffness and inertia matrices are stored in the body for inclusion in the output dataset. The inertia matrix is now computed on the full mesh (<a class="reference external" href="https://github.com/capytaine/capytaine/issues/197">GH197</a>, <a class="reference external" href="https://github.com/capytaine/capytaine/issues/249">GH249</a>, <a class="reference external" href="https://github.com/capytaine/capytaine/issues/258">GH258</a> and <a class="reference external" href="https://github.com/capytaine/capytaine/pull/262">PR262</a>).</p></li>
</ul>
</section>
<section id="minor-changes">
<h3>Minor changes<a class="headerlink" href="#minor-changes" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Add <code class="code docutils literal notranslate"><span class="pre">floating_point_precision</span></code> argument to <a class="reference internal" href="developer_manual/api/capytaine.green_functions.delhommeau.html#capytaine.green_functions.delhommeau.Delhommeau" title="capytaine.green_functions.delhommeau.Delhommeau"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Delhommeau()</span></code></a> and <a class="reference internal" href="developer_manual/api/capytaine.green_functions.delhommeau.html#capytaine.green_functions.delhommeau.XieDelhommeau" title="capytaine.green_functions.delhommeau.XieDelhommeau"><code class="xref py py-meth docutils literal notranslate"><span class="pre">XieDelhommeau()</span></code></a> that accepts either <code class="code docutils literal notranslate"><span class="pre">&quot;float32&quot;</span></code> for single precision computations or <code class="code docutils literal notranslate"><span class="pre">&quot;float64&quot;</span></code> for double precision computations (the latter is the default). (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/224">PR224</a>).</p></li>
<li><p>Passing the argument <code class="code docutils literal notranslate"><span class="pre">tabulation_nr=0</span></code> or <code class="code docutils literal notranslate"><span class="pre">tabulation_nz=0</span></code> to <a class="reference internal" href="developer_manual/api/capytaine.green_functions.delhommeau.html#capytaine.green_functions.delhommeau.Delhommeau" title="capytaine.green_functions.delhommeau.Delhommeau"><code class="xref py py-class docutils literal notranslate"><span class="pre">Delhommeau</span></code></a>
or <a class="reference internal" href="developer_manual/api/capytaine.green_functions.delhommeau.html#capytaine.green_functions.delhommeau.XieDelhommeau" title="capytaine.green_functions.delhommeau.XieDelhommeau"><code class="xref py py-class docutils literal notranslate"><span class="pre">XieDelhommeau</span></code></a> now allows to run the code without interpolating the Green function
from a precomputed tabulation. This is meant as a tools for benchmarks and validation, since it decreases the performance of the code
for often no accuracy gain. (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/229">PR229</a>)</p></li>
<li><p><a class="reference internal" href="developer_manual/api/capytaine.io.mesh_loaders.html#capytaine.io.mesh_loaders.load_mesh" title="capytaine.io.mesh_loaders.load_mesh"><code class="xref py py-func docutils literal notranslate"><span class="pre">load_mesh()</span></code></a> is now exported by the main namespace: <code class="code docutils literal notranslate"><span class="pre">from</span> <span class="pre">capytaine</span> <span class="pre">import</span> <span class="pre">load_mesh</span></code>.
The documentation has been changed to recommend the use of this function instead of <a class="reference internal" href="developer_manual/api/capytaine.bodies.bodies.html#capytaine.bodies.bodies.FloatingBody.from_file" title="capytaine.bodies.bodies.FloatingBody.from_file"><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_file()</span></code></a>.
(<a class="reference external" href="https://github.com/capytaine/capytaine/pull/231">PR231</a>)</p></li>
<li><p>When initializing a <code class="code docutils literal notranslate"><span class="pre">FloatingBody</span></code>, one can now pass directly a mesh object from <code class="code docutils literal notranslate"><span class="pre">meshio</span></code>.
The documentation has been changed to recommend this approach instead of <a class="reference internal" href="developer_manual/api/capytaine.bodies.bodies.html#capytaine.bodies.bodies.FloatingBody.from_meshio" title="capytaine.bodies.bodies.FloatingBody.from_meshio"><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_meshio()</span></code></a>.
(<a class="reference external" href="https://github.com/capytaine/capytaine/issues/259">GH259</a> and <a class="reference external" href="https://github.com/capytaine/capytaine/pull/261">PR261</a>)</p></li>
<li><p>When joining two bodies as e.g. <code class="code docutils literal notranslate"><span class="pre">body1</span> <span class="pre">+</span> <span class="pre">body2</span></code>, some hydrostatic properties are passed to the resulting body:
if all the bodies have hydrostatic stiffness matrices or inertia matrices defined,
then they are assigned to the joined body as a larger block diagonal matrix (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/243">PR243</a>).</p></li>
<li><p>Add <a class="reference internal" href="developer_manual/api/capytaine.bodies.bodies.html#capytaine.bodies.bodies.FloatingBody.immersed_part" title="capytaine.bodies.bodies.FloatingBody.immersed_part"><code class="xref py py-meth docutils literal notranslate"><span class="pre">immersed_part()</span></code></a> method to clip the body without modifying it in place (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/244">PR244</a>).</p></li>
<li><p>Add <code class="xref py py-func docutils literal notranslate"><span class="pre">rigid_body_dofs()</span></code> method returning a placeholder that can be given at the creation of <a class="reference internal" href="developer_manual/api/capytaine.bodies.bodies.html#capytaine.bodies.bodies.FloatingBody" title="capytaine.bodies.bodies.FloatingBody"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatingBody</span></code></a> to initialize the six rigid body dofs (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/245">PR245</a>).</p></li>
<li><p>Custom classes from the <code class="code docutils literal notranslate"><span class="pre">capytaine.matrices</span></code> module storing block matrices or data-sparse matrices
can be transformed into full Numpy arrays with <code class="code docutils literal notranslate"><span class="pre">np.array(...)</span></code> (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/99">PR99</a>)</p></li>
<li><p>Add <code class="code docutils literal notranslate"><span class="pre">Dockerfile</span></code> and instructions to install with Docker (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/137">PR137</a>)</p></li>
<li><p>Add optional arguments to <code class="xref py py-func docutils literal notranslate"><span class="pre">write_GDF()</span></code> to write parameters <code class="code docutils literal notranslate"><span class="pre">ulen,</span> <span class="pre">grav,</span> <span class="pre">isx,</span> <span class="pre">isy</span></code> to the mesh file (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/241">PR241</a>)</p></li>
<li><p>Fix bug with MED mesh file loading (<a class="reference external" href="https://github.com/capytaine/capytaine/issues/247">GH247</a> and <a class="reference external" href="https://github.com/capytaine/capytaine/pull/250">PR250</a>).</p></li>
<li><p>Several surface integrals properties of <code class="code docutils literal notranslate"><span class="pre">FloatingBodies</span></code> are also defined on meshes, such as <code class="code docutils literal notranslate"><span class="pre">volume</span></code> or <code class="code docutils literal notranslate"><span class="pre">center_of_buoyancy</span></code> (pull:<cite>263</cite>).</p></li>
</ul>
</section>
<section id="internals">
<h3>Internals<a class="headerlink" href="#internals" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>The integration of the pressure on the mesh of the body was implemented twice independently. It has been factored out in <a class="reference internal" href="developer_manual/api/capytaine.bodies.bodies.html#capytaine.bodies.bodies.FloatingBody.integrate_pressure" title="capytaine.bodies.bodies.FloatingBody.integrate_pressure"><code class="xref py py-meth docutils literal notranslate"><span class="pre">integrate_pressure()</span></code></a> (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/218">PR218</a>)</p></li>
<li><p><cite>__rmatmul__</cite> has been implemented for low rank matrices (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/222">PR222</a>).</p></li>
<li><p>New implementation of the GDF mesh file reader <code class="xref py py-func docutils literal notranslate"><span class="pre">load_GDF()</span></code> (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/241">PR241</a>)</p></li>
</ul>
</section>
</section>
<section id="new-in-version-1-4-2-2022-10-03">
<h2>New in version 1.4.2 (2022-10-03)<a class="headerlink" href="#new-in-version-1-4-2-2022-10-03" title="Permalink to this heading">¶</a></h2>
<section id="bug-fixes">
<h3>Bug fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Raise error message when calling <a class="reference internal" href="developer_manual/api/capytaine.bodies.bodies.html#capytaine.bodies.bodies.FloatingBody.compute_hydrostatics" title="capytaine.bodies.bodies.FloatingBody.compute_hydrostatics"><code class="xref py py-meth docutils literal notranslate"><span class="pre">compute_hydrostatics()</span></code></a> without a center of mass defined (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/207">PR207</a>).</p></li>
<li><p>Fix bug when cropping body with a dof defined manually as a list of tuples (<a class="reference external" href="https://github.com/capytaine/capytaine/issues/204">GH204</a> and <a class="reference external" href="https://github.com/capytaine/capytaine/pull/206">PR206</a>).</p></li>
</ul>
</section>
<section id="documentation">
<h3>Documentation<a class="headerlink" href="#documentation" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Miscellaneous improvements of the documentation (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/205">PR205</a>, <a class="reference external" href="https://github.com/capytaine/capytaine/pull/211">PR211</a>, <a class="reference external" href="https://github.com/capytaine/capytaine/pull/219">PR219</a>)</p></li>
<li><p>Clean up and fix animation example in the cookbook (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/213">PR213</a>).</p></li>
<li><p>The warning message for insufficient mesh resolution appears earlier and has been reworded to be clearer (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/217">PR217</a>).</p></li>
</ul>
</section>
<section id="id1">
<h3>Internals<a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Replace the Fortran core by a git submodule pointing to <a class="reference external" href="https://github.com/capytaine/libDelhommeau/">libDelhommeau</a> (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/208">PR208</a>).
Future developments of the Green function will take place there.</p></li>
<li><p>Move from Travis CI to Github Actions for continuous integration (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/209">PR209</a>)</p></li>
</ul>
</section>
</section>
<section id="new-in-version-1-4-1-2022-09-05">
<h2>New in version 1.4.1 (2022-09-05)<a class="headerlink" href="#new-in-version-1-4-1-2022-09-05" title="Permalink to this heading">¶</a></h2>
<section id="id2">
<h3>Bug fixes<a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Fix bug in hydrostatics of rigid bodies: the hydrostatic matrices were always assuming that the rotation dofs were defined around the <span class="math notranslate nohighlight">\((0, 0, 0)\)</span> point.
The stiffness and inertia matrix are now invariant by horizontal translation of the body, as they should be. (<a class="reference external" href="https://github.com/capytaine/capytaine/issues/178">GH178</a> and <a class="reference external" href="https://github.com/capytaine/capytaine/pull/196">PR196</a>).</p></li>
<li><p>Removed outdated volume/area methods from pre-defined bodies (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/183">PR183</a>).</p></li>
<li><p>Added symmetric realization and reflection to gdf mesh import (<a class="reference external" href="https://github.com/capytaine/capytaine/issues/186">GH186</a> and <a class="reference external" href="https://github.com/capytaine/capytaine/pull/187">PR187</a>).</p></li>
<li><p>Fix some automatic mesh names (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/195">PR195</a>)</p></li>
<li><p>Fix ordering of the dofs when using <a class="reference internal" href="developer_manual/api/capytaine.bodies.bodies.html#capytaine.bodies.bodies.FloatingBody.assemble_regular_array" title="capytaine.bodies.bodies.FloatingBody.assemble_regular_array"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assemble_regular_array()</span></code></a> (<a class="reference external" href="https://github.com/capytaine/capytaine/issues/198">GH198</a> and <a class="reference external" href="https://github.com/capytaine/capytaine/pull/199">PR199</a>)</p></li>
<li><p>Return more explicit error message when the center of mass is missing for the computation of rigid-body hydrostatics (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/201">PR201</a>).</p></li>
<li><p>Return error message when trying to animate a body with a dof that has not been defined. Previously, undefined dofs were silently ignored. (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/202">PR202</a>)</p></li>
</ul>
</section>
</section>
<section id="new-in-version-1-4-2022-07-07">
<h2>New in version 1.4 (2022-07-07)<a class="headerlink" href="#new-in-version-1-4-2022-07-07" title="Permalink to this heading">¶</a></h2>
<section id="id3">
<h3>Major changes<a class="headerlink" href="#id3" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>The function that used to be called <code class="code docutils literal notranslate"><span class="pre">impedance</span></code> is now named <a class="reference internal" href="developer_manual/api/capytaine.post_pro.impedance.html#capytaine.post_pro.impedance.rao_transfer_function" title="capytaine.post_pro.impedance.rao_transfer_function"><code class="xref py py-func docutils literal notranslate"><span class="pre">rao_transfer_function()</span></code></a>.
The new function <a class="reference internal" href="developer_manual/api/capytaine.post_pro.impedance.html#capytaine.post_pro.impedance.impedance" title="capytaine.post_pro.impedance.impedance"><code class="xref py py-func docutils literal notranslate"><span class="pre">impedance()</span></code></a> is the actual impedance matrix (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/142">PR142</a>, <a class="reference external" href="https://github.com/capytaine/capytaine/issues/147">GH147</a>, <a class="reference external" href="https://github.com/capytaine/capytaine/pull/149">PR149</a>).</p></li>
<li><p>The mass matrix of a floating body used to be denoted <code class="code docutils literal notranslate"><span class="pre">mass</span></code>. It is now denote <code class="code docutils literal notranslate"><span class="pre">inertia_matrix</span></code>.
The attribute <code class="code docutils literal notranslate"><span class="pre">body.mass</span></code> is now used instead for the (scalar) mass of the body. (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/165">PR165</a>)</p></li>
<li><p>Implementation of <a class="reference internal" href="developer_manual/api/capytaine.bodies.predefined.spheres.html#capytaine.bodies.predefined.spheres.Sphere" title="capytaine.bodies.predefined.spheres.Sphere"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sphere</span></code></a> has changed.
The use of symmetry is now controlled by the <code class="code docutils literal notranslate"><span class="pre">axial_symmetry</span></code> keyword argument.
The <code class="code docutils literal notranslate"><span class="pre">clever</span></code> keyword argument is deprecated for <code class="code docutils literal notranslate"><span class="pre">Sphere</span></code> and should be replaced by the more explicit keyword arguments <code class="code docutils literal notranslate"><span class="pre">axial_symmetry</span></code>.
Meanwhile, a bug has been fixed with its <code class="code docutils literal notranslate"><span class="pre">geometric_center</span></code> (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/150">PR150</a>).</p></li>
<li><p>The default linear solver is the direct solver and not the iterative solver GMRES, because it is more robust and more predictable.
Nothing changes when users explicitely choose a linear solver. (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/171">PR171</a>)</p></li>
</ul>
</section>
<section id="id4">
<h3>Bug fixes<a class="headerlink" href="#id4" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Fix major bug in impedance matrix and RAO computation: the sign of the dissipation matrix was wrong in previous versions (<a class="reference external" href="https://github.com/capytaine/capytaine/issues/102">GH102</a> and <a class="reference external" href="https://github.com/capytaine/capytaine/pull/140">PR140</a>).</p></li>
<li><p>Fix major inaccuracy for deep panels or high frequencies, that is panels deeper than <span class="math notranslate nohighlight">\(1.2\lambda\)</span> below the free surface where <span class="math notranslate nohighlight">\(\lambda\)</span> is the wavelength (<a class="reference external" href="https://github.com/capytaine/capytaine/issues/38">GH38</a> and <a class="reference external" href="https://github.com/capytaine/capytaine/pull/156">PR156</a>)</p></li>
<li><p>Wave directions in <code class="code docutils literal notranslate"><span class="pre">Nemoh.cal</span></code> are interpreted as degrees as they should be (and then converted to radians to be handled by the rest of the code). (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/141">PR141</a>)</p></li>
<li><p>Fix bug in rotations around axis that does not pass by (0, 0, 0) (<a class="reference external" href="https://github.com/capytaine/capytaine/issues/151">GH151</a> and <a class="reference external" href="https://github.com/capytaine/capytaine/pull/152">PR152</a>).</p></li>
<li><p>New implementation of the mesh importer for <code class="code docutils literal notranslate"><span class="pre">hst</span></code> files. (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/90">PR90</a>)
It should be more robust and support more variants of the <code class="code docutils literal notranslate"><span class="pre">hst</span></code> mesh file format.</p></li>
<li><p>Support for quadratures from <a class="reference external" href="https://pypi.org/project/quadpy/">quadpy</a> has been updated to support the version 0.16.16 of quadpy (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/164">PR164</a>).</p></li>
</ul>
</section>
<section id="new-features">
<h3>New features<a class="headerlink" href="#new-features" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Add method to compute some of the hydrostatic parameters such as volume, buoyancy center, wet surface area, hydrostatic stiffness, inertia matrix etc.
<code class="code docutils literal notranslate"><span class="pre">compute_hydrostatics</span></code> method is created to return all hydrostatic parameters similar to <code class="code docutils literal notranslate"><span class="pre">meshmagick.hydrostatics.compute_hydrostatics</span></code> (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/106">PR106</a>).
By default, the hydrostatics are computed assuming a neutrally buoyant body (its mass is the displaced mass of water).
Non-neutrally buoyant are partially supported, by setting the <code class="code docutils literal notranslate"><span class="pre">mass</span></code> attribute of the body (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/166">PR166</a>)</p></li>
<li><p>Add new parallelization using the <a class="reference external" href="https://joblib.readthedocs.io">joblib</a> library as a new optional dependency.
The optional keyword-argument <code class="code docutils literal notranslate"><span class="pre">n_jobs</span></code> in the <a class="reference internal" href="developer_manual/api/capytaine.bem.solver.html#capytaine.bem.solver.BEMSolver.solve_all" title="capytaine.bem.solver.BEMSolver.solve_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">solve_all()</span></code></a> and <a class="reference internal" href="developer_manual/api/capytaine.bem.solver.html#capytaine.bem.solver.BEMSolver.fill_dataset" title="capytaine.bem.solver.BEMSolver.fill_dataset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">fill_dataset()</span></code></a> controls the number of processes running in parallel (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/136">PR136</a>). By default, this parallelisation is disabled (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/172">PR172</a>).</p></li>
<li><p>Refactor Delhommeau’s method for the Green function evaluation. The size of the tabulation is not hard-coded anymore and can be changed by users. (<a class="reference external" href="https://github.com/capytaine/capytaine/issues/20">GH20</a> and <a class="reference external" href="https://github.com/capytaine/capytaine/pull/157">PR157</a>)</p></li>
<li><p>Method <code class="code docutils literal notranslate"><span class="pre">show_matplotlib</span></code> can now colour mesh faces based on a specified scalar field (e.g. pressure) (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/122">PR122</a>).</p></li>
<li><p>The functions <a class="reference internal" href="developer_manual/api/capytaine.io.xarray.html#capytaine.io.xarray.problems_from_dataset" title="capytaine.io.xarray.problems_from_dataset"><code class="xref py py-func docutils literal notranslate"><span class="pre">problems_from_dataset()</span></code></a> and <a class="reference internal" href="developer_manual/api/capytaine.bem.solver.html#capytaine.bem.solver.BEMSolver.fill_dataset" title="capytaine.bem.solver.BEMSolver.fill_dataset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">fill_dataset()</span></code></a> accept a body alone as input.
That is, one can use <code class="code docutils literal notranslate"><span class="pre">fill_dataset(test_matrix,</span> <span class="pre">body)</span></code> and not only <code class="code docutils literal notranslate"><span class="pre">fill_dataset(test_matrix,</span> <span class="pre">[body])</span></code> (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/144">PR144</a>).</p></li>
</ul>
</section>
<section id="documentation-and-error-handling">
<h3>Documentation and error handling<a class="headerlink" href="#documentation-and-error-handling" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><dl class="simple">
<dt>Improve feedback to users:</dt><dd><ul>
<li><p>Print a warning if the user provides a <code class="code docutils literal notranslate"><span class="pre">wave_direction</span></code> that is not in the range [-2π, 2π]. (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/141">PR141</a>)</p></li>
<li><p>Raise an error when the Green function evaluation returns a <code class="code docutils literal notranslate"><span class="pre">NaN</span></code> (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/143">PR143</a>).</p></li>
<li><p>Improve message when the GMRES did not converge (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/143">PR143</a>).</p></li>
<li><p>Raise an error when a body with an empty mesh is given to <code class="code docutils literal notranslate"><span class="pre">LinearPotentialFlowProblem</span></code> (<a class="reference external" href="https://github.com/capytaine/capytaine/issues/128">GH128</a> and <a class="reference external" href="https://github.com/capytaine/capytaine/pull/145">PR145</a>).</p></li>
<li><p>Print a warning when a key is unknown in the test matrix provided to <a class="reference internal" href="developer_manual/api/capytaine.bem.solver.html#capytaine.bem.solver.BEMSolver.fill_dataset" title="capytaine.bem.solver.BEMSolver.fill_dataset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">fill_dataset()</span></code></a> (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/155">PR155</a>).</p></li>
<li><p>Raise an error if neither <code class="code docutils literal notranslate"><span class="pre">radiating_dof</span></code> (for radiation problems) nor <code class="code docutils literal notranslate"><span class="pre">wave_direction</span></code> (for diffraction problems) is provided in the test matrix in <a class="reference internal" href="developer_manual/api/capytaine.bem.solver.html#capytaine.bem.solver.BEMSolver.fill_dataset" title="capytaine.bem.solver.BEMSolver.fill_dataset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">fill_dataset()</span></code></a> (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/155">PR155</a>).</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>A new example using Haskind’s relation has been added to the cookbook (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/129">PR129</a>).</p></li>
<li><p>Miscellaneous improvements of the documentation.</p></li>
</ul>
</section>
</section>
<section id="new-in-version-1-3-2021-10-07">
<h2>New in version 1.3 (2021-10-07)<a class="headerlink" href="#new-in-version-1-3-2021-10-07" title="Permalink to this heading">¶</a></h2>
<section id="id5">
<h3>Major changes<a class="headerlink" href="#id5" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>The mesh are always “healed” when a new <code class="code docutils literal notranslate"><span class="pre">FloatingBody</span></code> is initialised
(i.e. unused vertices are removed, degenerate triangles are removed, etc.).
See for instance <a class="reference external" href="https://github.com/capytaine/capytaine/issues/46">GH46</a>.</p></li>
<li><p>Implementation of symmetries for <code class="code docutils literal notranslate"><span class="pre">HorizontalCylinder</span></code> has changed.
The cylinder is now a reflection of two halves containing translational
repetition of half rings, instead of a translational repetition of symmetric
ring. By default, only reflection symmetry is used. (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/91">PR91</a>)
The use of symmetries can be controlled with <code class="code docutils literal notranslate"><span class="pre">translation_symmetry</span></code> and
<code class="code docutils literal notranslate"><span class="pre">reflection_symmetry</span></code> optional keyword arguments.
The <code class="code docutils literal notranslate"><span class="pre">clever</span></code> keyword argument is deprecated for <code class="code docutils literal notranslate"><span class="pre">HorizontalCylinder</span></code>
and should be replaced by the new more explicit keyword arguments above.</p></li>
</ul>
</section>
<section id="id6">
<h3>New features<a class="headerlink" href="#id6" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Add method <code class="code docutils literal notranslate"><span class="pre">FloatingBody.from_meshio</span></code> to import <a class="reference external" href="https://pypi.org/project/meshio/">meshio</a> and <a class="reference external" href="https://pypi.org/project/pygmsh/">pygmsh</a> mesh objects (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/62">PR62</a>)</p></li>
<li><p>Add method <code class="code docutils literal notranslate"><span class="pre">FloatingBody.assemble_arbitrary_array</span></code> to make an array of bodies with arbitrary layout (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/71">PR71</a>).</p></li>
<li><p>Break out impedance from RAO to separate function (<a class="reference external" href="https://github.com/capytaine/capytaine/issues/61">GH61</a> and <a class="reference external" href="https://github.com/capytaine/capytaine/pull/63">PR63</a>).</p></li>
<li><p>Method <cite>problems_from_dataset</cite> can now use a list of gravitational acceleration <cite>g</cite> values in the test matrix (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/86">PR86</a>).</p></li>
<li><p>Add example in cookbook for computing hydrostatics and mass properties with Meshmagick 2 (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/70">PR70</a>).</p></li>
</ul>
</section>
<section id="id7">
<h3>Bug fixes<a class="headerlink" href="#id7" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Fix bug in free surface elevation computation when the number of faces in the free surface mesh is not a multiple of the chunk size, that is by default a multiple of 50 (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/82">PR82</a>).</p></li>
<li><p>The function <code class="code docutils literal notranslate"><span class="pre">assemble_dataset</span></code> did not support well the problems without a free surface. In the new version, such problems are explicitly ignored and a warning message is displayed. (<a class="reference external" href="https://github.com/capytaine/capytaine/issues/88">GH88</a> and <a class="reference external" href="https://github.com/capytaine/capytaine/pull/89">PR89</a>).</p></li>
<li><p>Fix bug in some of the mesh readers/writers when using pathlib path objects (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/87">PR87</a>).</p></li>
<li><p>Function <code class="code docutils literal notranslate"><span class="pre">load_GDF</span></code> has been rewritten to accept any GDF file format (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/97">PR97</a>).</p></li>
</ul>
</section>
<section id="internal-and-development">
<h3>Internal and development<a class="headerlink" href="#internal-and-development" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Easier installation of optional dependencies via <code class="code docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-e</span> <span class="pre">.[extra]</span></code> and <code class="code docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-e</span> <span class="pre">.[develop]</span></code> (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/96">PR96</a>).</p></li>
<li><p>Use pytest skipif to skip tests if optional dependencies are not installed (<a class="reference external" href="https://github.com/capytaine/capytaine/pull/68">PR68</a>).</p></li>
</ul>
</section>
</section>
<section id="new-in-version-1-2-1-2021-04-14">
<h2>New in version 1.2.1 (2021-04-14)<a class="headerlink" href="#new-in-version-1-2-1-2021-04-14" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>Minor bug fixes,
including <a class="reference external" href="https://github.com/capytaine/capytaine/issues/37">GH37</a>
and <a class="reference external" href="https://github.com/capytaine/capytaine/issues/56">GH56</a> (thanks to Ryan Coe).</p></li>
<li><p>Add a warning when a panel is on the free surface
(see <a class="reference external" href="https://github.com/capytaine/capytaine/issues/29">GH29</a> and <a class="reference external" href="https://github.com/capytaine/capytaine/issues/50">GH50</a>)</p></li>
</ul>
</section>
<section id="new-in-version-1-2-2020-04-24">
<h2>New in version 1.2 (2020-04-24)<a class="headerlink" href="#new-in-version-1-2-2020-04-24" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>Experimental implementation of higher order quadratures for the integration of
the Green function on the mesh. Default behavior is still the first order
integration as in Nemoh.</p></li>
<li><p>Add method <code class="code docutils literal notranslate"><span class="pre">FloatingBody.animate</span></code> to quickly visualize the motion of a body
and add method <code class="code docutils literal notranslate"><span class="pre">Animation.embed_in_notebook</span></code> to embed animations in Jupyter
notebooks.</p></li>
<li><p>Keep the order of the dofs in <cite>xarray</cite>’s Datasets.
This patch uses the CategoricalIndex feature of <cite>xarray</cite> which was buggy
before version 0.15.1 of <cite>xarray</cite>. Thus this minimal version is now required.</p></li>
<li><p>Add missing Kochin function for the diffraction.
(See <a class="reference external" href="https://github.com/capytaine/capytaine/issues/22">GH22</a>.)
In previous version the variable named <code class="code docutils literal notranslate"><span class="pre">kochin</span></code> in the dataset was only the
Kochin function for the radiated waves. A new variable names
<code class="code docutils literal notranslate"><span class="pre">kochin_diffraction</span></code> has been added. The existing variable <code class="code docutils literal notranslate"><span class="pre">kochin</span></code> has not
been renamed, for backward compatibility, but might be in a future release of
Capytaine.</p></li>
<li><p>Improvement of caching to limit RAM usage for large problems.</p></li>
<li><p>Make optional the dependency to graphical packages (<cite>matplotlib</cite> and <cite>vtk</cite>).
They were causing issues to some users.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">problems_and_results.py</span></code> has been rewritten to be slightly more readable and
remove the dependency to <cite>attrs</cite>.</p></li>
</ul>
</section>
<section id="new-in-version-1-1-2019-09-24">
<h2>New in version 1.1 (2019-09-24)<a class="headerlink" href="#new-in-version-1-1-2019-09-24" title="Permalink to this heading">¶</a></h2>
<section id="id8">
<h3>Major changes<a class="headerlink" href="#id8" title="Permalink to this heading">¶</a></h3>
<ul>
<li><p>Refactoring of the implementation of the solver.
The new implementation separates the solver itself from the evaluation of the
Green function and the matrix building engine.
This more modular structure allows user to choose separately the Green
function and the matrix engine that they want to use.</p>
<p>The former API (<code class="code docutils literal notranslate"><span class="pre">Nemoh()</span></code> object) has been kept for backward compatibility.
In most cases, replacing <code class="code docutils literal notranslate"><span class="pre">Nemoh()</span></code> by <code class="code docutils literal notranslate"><span class="pre">BEMSolver()</span></code> is sufficient
to migrate to the new structure.</p>
<p>See <a class="reference internal" href="user_manual/resolution.html"><span class="doc">Resolution</span></a> for the full documentation of the new structure
and <a class="reference internal" href="user_manual/cookbook.html"><span class="doc">Cookbook</span></a> for examples.</p>
</li>
<li><p>Add Xie’s variant of Delhommeau’s Green function
<a class="reference internal" href="developer_manual/api/capytaine.green_functions.delhommeau.html#capytaine.green_functions.delhommeau.XieDelhommeau" title="capytaine.green_functions.delhommeau.XieDelhommeau"><code class="xref py py-class docutils literal notranslate"><span class="pre">XieDelhommeau</span></code></a> <a class="reference internal" href="theory_manual/bibliography.html#x18" id="id9"><span>[X18]</span></a>.</p></li>
<li><p>The option <cite>cache_rankine_matrices</cite> has been removed. It was impeding the
performance and modularity of the code for a very low gain. It might be
reimplemented in a future version if there is really a need for it.</p></li>
</ul>
</section>
<section id="id10">
<h3>Minor changes<a class="headerlink" href="#id10" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Minor performance improvements.</p></li>
<li><p>Fix Github issue #18.</p></li>
<li><p>Improve test suite.</p></li>
</ul>
</section>
</section>
<section id="new-in-version-1-0-1-2019-03-28">
<h2>New in version 1.0.1 (2019-03-28)<a class="headerlink" href="#new-in-version-1-0-1-2019-03-28" title="Permalink to this heading">¶</a></h2>
<section id="id11">
<h3>Minor changes<a class="headerlink" href="#id11" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Fix compilation flags for OpenMP</p></li>
<li><p>Minor corrections in the documentation.</p></li>
</ul>
</section>
</section>
<section id="new-in-version-1-0-2019-03-14">
<h2>New in version 1.0 (2019-03-14)<a class="headerlink" href="#new-in-version-1-0-2019-03-14" title="Permalink to this heading">¶</a></h2>
<section id="id12">
<h3>Major changes<a class="headerlink" href="#id12" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>The <code class="code docutils literal notranslate"><span class="pre">angle</span></code> parameter has been renamed to the more accurate name
<code class="code docutils literal notranslate"><span class="pre">wave_direction</span></code>.</p></li>
<li><p>Most of the modules have been reorganized in several packages. See the
<a class="reference internal" href="developer_manual/overview.html"><span class="doc">Overview of the modules</span></a> for some details.</p></li>
<li><p>Test compatibility of the code with Python 3.7 and numpy 1.16.</p></li>
<li><p>Remove a couple of unmaintained or unfinished submodules.</p></li>
</ul>
<section id="id13">
<h4>Minor changes<a class="headerlink" href="#id13" title="Permalink to this heading">¶</a></h4>
</section>
</section>
<section id="general">
<h3>General<a class="headerlink" href="#general" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Many improvements of the documentation.</p></li>
<li><p>Reorganization of some of the tests.</p></li>
<li><p>Various small performance improvement.</p></li>
</ul>
</section>
<section id="mesh-and-bodies">
<h3>Mesh and bodies<a class="headerlink" href="#mesh-and-bodies" title="Permalink to this heading">¶</a></h3>
<ul>
<li><p>Rename <code class="code docutils literal notranslate"><span class="pre">center</span></code> into either <code class="code docutils literal notranslate"><span class="pre">geometric_center</span></code> or
<code class="code docutils literal notranslate"><span class="pre">center_of_mass</span></code> depending of the case.</p></li>
<li><p>New method for geometric bodies <code class="code docutils literal notranslate"><span class="pre">rotate_around_center_to_align_vectors</span></code>
replacing <code class="code docutils literal notranslate"><span class="pre">rotate_to_align_axes</span></code>.</p></li>
<li><p>Add methods <code class="code docutils literal notranslate"><span class="pre">sliced_by_plane</span></code> and <code class="code docutils literal notranslate"><span class="pre">minced</span></code> for hierarchical
decomposition of the mesh.</p></li>
<li><p>Symmetric meshes classes have been renamed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ReflectionSymmetry</span> <span class="o">-&gt;</span> <span class="n">ReflectionSymmetricMesh</span>
<span class="n">etc</span><span class="o">.</span>
</pre></div>
</div>
</li>
<li><p>Plane are now oriented: they are equal only if their normal point in the same
direction.</p></li>
</ul>
</section>
<section id="solver">
<h3>Solver<a class="headerlink" href="#solver" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Store solver settings in output dataset.</p></li>
<li><p>Rename setting <code class="code docutils literal notranslate"><span class="pre">use_symmetries</span></code> into <code class="code docutils literal notranslate"><span class="pre">hierarchical_toeplitz_matrices</span></code>.</p></li>
<li><p>Fix bugs and improve implementation of the Adaptive Cross Approximation.</p></li>
</ul>
</section>
</section>
<section id="new-in-version-0-6-2019-02-11">
<h2>New in version 0.6 (2019-02-11)<a class="headerlink" href="#new-in-version-0-6-2019-02-11" title="Permalink to this heading">¶</a></h2>
<section id="id14">
<h3>Major changes<a class="headerlink" href="#id14" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Full rewrite of the matrices and linear solvers implementation.
All the relevant code is now in the submodule <code class="code docutils literal notranslate"><span class="pre">capytaine.matrices</span></code>.</p></li>
<li><p>Refactored implementation of block Toeplitz matrices, block symmetric Toeplitz
matrices and block circulant matrices.
Refactoring of the block diagonalization of block circulant matrices through
FFT.</p></li>
<li><p>Low rank approximation of the matrices with Adaptive Cross Approximation for
the use of hierarchical matrices.</p></li>
<li><p>Option to solve the linear system with GMRES instead of a direct solver.</p></li>
<li><p>Refactoring of the 3D animation module for animation of the body motions,
animated colormap of the pressure, free-surface elevation and export as a
video. See cookbook for an example of the new API.</p></li>
</ul>
</section>
<section id="id15">
<h3>Minor changes<a class="headerlink" href="#id15" title="Permalink to this heading">¶</a></h3>
<section id="id16">
<h4>General<a class="headerlink" href="#id16" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p>Reorganization of the <code class="code docutils literal notranslate"><span class="pre">pytest</span></code> directory.</p></li>
<li><p>Add an experimental <code class="code docutils literal notranslate"><span class="pre">capytaine.tools.rao</span></code> module to compute Response Amplitude
Operators.</p></li>
<li><p>Various bug fixes and improvements of the documentation.</p></li>
</ul>
</section>
<section id="id17">
<h4>Solver<a class="headerlink" href="#id17" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p>More options to set the behavior of the solver at run time <code class="code docutils literal notranslate"><span class="pre">Nemoh</span></code> (use
of symmetries, use of caching, choice of the linear solver, …).
See its docstring for details.</p></li>
<li><p>Change of default behavior: the solver stores the details in the <code class="code docutils literal notranslate"><span class="pre">Result</span></code>
container when using <code class="code docutils literal notranslate"><span class="pre">solve</span></code>, not when using <code class="code docutils literal notranslate"><span class="pre">solve_all</span></code> or
<code class="code docutils literal notranslate"><span class="pre">fill_dataset</span></code>.</p></li>
<li><p>The water density can be specified in the test matrix when using
<code class="code docutils literal notranslate"><span class="pre">fill_dataset</span></code>.</p></li>
<li><p>Function <code class="code docutils literal notranslate"><span class="pre">kochin_dataset</span></code> to build a xarray of Kochin function.</p></li>
<li><p>Add the option <code class="code docutils literal notranslate"><span class="pre">chunk_size</span></code> to the computation of the free surface
elevation in order to limit the RAM consumption.</p></li>
<li><p>Minor refactoring of the solver and the computation of the Green function.</p></li>
</ul>
</section>
<section id="meshes-and-bodies">
<h4>Meshes and bodies<a class="headerlink" href="#meshes-and-bodies" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p>CollectionOfMeshes is not a subclass of Tuple anymore.</p></li>
<li><p>New method <code class="code docutils literal notranslate"><span class="pre">assemble_regular_array</span></code> to build an array of identical bodies.</p></li>
<li><p>Harmonize naming of functions that are not in-place: <code class="code docutils literal notranslate"><span class="pre">symmetrize</span> <span class="pre">-&gt;</span> <span class="pre">symmetrized</span></code>, <code class="code docutils literal notranslate"><span class="pre">merge</span> <span class="pre">-&gt;</span> <span class="pre">merged</span></code></p></li>
<li><p>Refactoring of the internals of the mesh clipper. New <code class="code docutils literal notranslate"><span class="pre">clip</span></code> and <code class="code docutils literal notranslate"><span class="pre">clipped</span></code> methods for meshes and bodies.
When a body is clipped with <code class="code docutils literal notranslate"><span class="pre">clip</span></code> or <code class="code docutils literal notranslate"><span class="pre">keep_immersed_part</span></code>, the dofs are updated.</p></li>
<li><p>Change naming of dof when bodies are joined: <code class="code docutils literal notranslate"><span class="pre">body_name__dof_name</span></code> instead of <code class="code docutils literal notranslate"><span class="pre">body_name_dof_name</span></code>.</p></li>
<li><p>The combination of bodies with <code class="code docutils literal notranslate"><span class="pre">+</span></code> is associative with respect to the
names of the dofs.</p></li>
<li><p>Minor improvements of meshes and bodies <code class="code docutils literal notranslate"><span class="pre">repr</span></code>.</p></li>
</ul>
</section>
</section>
</section>
<section id="new-in-version-0-5-1-2018-10-17">
<h2>New in version 0.5.1 (2018-10-17)<a class="headerlink" href="#new-in-version-0-5-1-2018-10-17" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>Minor bugs fixes.</p></li>
<li><p>Small performance improvements.</p></li>
<li><p>Update documentation.</p></li>
</ul>
</section>
<section id="new-in-version-0-5-2018-09-18">
<h2>New in version 0.5 (2018-09-18)<a class="headerlink" href="#new-in-version-0-5-2018-09-18" title="Permalink to this heading">¶</a></h2>
<section id="id18">
<h3>Major changes<a class="headerlink" href="#id18" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Experimental OpenMP parallelization of the computation of the influence matrices.
The parallelization in <code class="code docutils literal notranslate"><span class="pre">solve_all</span></code> has been removed.</p></li>
<li><p>Integration of a refactored subset of Meshmagick into Capytaine as the <code class="code docutils literal notranslate"><span class="pre">mesh</span></code> submodule.
Meshmagick is not a dependency any more.</p></li>
<li><p>Reorganization of the submodules:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">capytaine</span><span class="o">.</span><span class="n">mesh_collection</span>                  <span class="o">-&gt;</span> <span class="n">capytaine</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">meshes_collection</span>
<span class="n">capytaine</span><span class="o">.</span><span class="n">symmetries</span>                       <span class="o">-&gt;</span> <span class="n">capytaine</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">symmetries</span>
<span class="n">capytaine</span><span class="o">.</span><span class="n">cli</span>                              <span class="o">-&gt;</span> <span class="n">capytaine</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">cli</span>
<span class="n">capytaine</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">vtk</span>                        <span class="o">-&gt;</span> <span class="n">capytaine</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">vtk</span>
<span class="n">capytaine</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">mpl_free_surface_animation</span> <span class="o">-&gt;</span> <span class="n">capytaine</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">mpl_free_surface_animation</span>
<span class="n">capytaine</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">import_export</span>              <span class="o">-&gt;</span> <span class="n">capytaine</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">legacy</span>
<span class="n">capytaine</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">bemio</span>                      <span class="o">-&gt;</span> <span class="n">capytaine</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">bemio</span>
<span class="n">meshmagick</span><span class="o">.</span><span class="n">mmio</span>                            <span class="o">-&gt;</span> <span class="n">capytaine</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">mesh_loaders</span> <span class="ow">and</span> <span class="n">capytaine</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">mesh_writers</span>
</pre></div>
</div>
</section>
<section id="id19">
<h3>Minor changes<a class="headerlink" href="#id19" title="Permalink to this heading">¶</a></h3>
<section id="id20">
<h4>Solver<a class="headerlink" href="#id20" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p>Reorganization of the internals of the solver <code class="code docutils literal notranslate"><span class="pre">Nemoh.py</span></code> and <code class="code docutils literal notranslate"><span class="pre">NemohCore</span></code>.
The initialization options <code class="code docutils literal notranslate"><span class="pre">keep_matrices</span></code> and <code class="code docutils literal notranslate"><span class="pre">max_stored_exponential_decompositions</span></code> have been removed.
The former has been replaced by a <code class="code docutils literal notranslate"><span class="pre">matrix_cache_size</span></code> optional argument (default value: 1).</p></li>
<li><p>Support of <span class="math notranslate nohighlight">\(\omega=0\)</span> and <span class="math notranslate nohighlight">\(\omega=\infty\)</span> in the infinite depth case.</p></li>
<li><p>The wavenumber is not computed in Fortran anymore.</p></li>
</ul>
</section>
<section id="outputs">
<h4>Outputs<a class="headerlink" href="#outputs" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p>Some body properties are stored in xarray dataset if they are available.
New functions <code class="code docutils literal notranslate"><span class="pre">add_wavenumber_coords</span></code> and <code class="code docutils literal notranslate"><span class="pre">kochin_data_array</span></code> allow the storage of wavenumbers and Kochin function in the dataset.</p></li>
<li><p>New functions <code class="code docutils literal notranslate"><span class="pre">separate_complex_values</span></code> and <code class="code docutils literal notranslate"><span class="pre">merge_complex_values</span></code>
in <code class="code docutils literal notranslate"><span class="pre">capytaine.io.xarray</span></code> to better handle complex values when saving
datasets.</p></li>
<li><p>New function <code class="code docutils literal notranslate"><span class="pre">problems_from_dataset</span></code> to generate a list of problems from the coordinates of
a xarray dataset.
New method <code class="code docutils literal notranslate"><span class="pre">fill_dataset</span></code> in <code class="code docutils literal notranslate"><span class="pre">capytaine.Nemoh.Nemoh</span></code> using the above.</p></li>
<li><p>New function <code class="code docutils literal notranslate"><span class="pre">write_dataset_as_tecplot_files()</span></code> in <code class="code docutils literal notranslate"><span class="pre">capytaine.tools</span></code> for legacy Tecplot output.</p></li>
</ul>
</section>
<section id="meshes">
<h4>Meshes<a class="headerlink" href="#meshes" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p>Refactoring of the transformation methods (<code class="code docutils literal notranslate"><span class="pre">translate</span></code>, <code class="code docutils literal notranslate"><span class="pre">rotate</span></code>, <code class="code docutils literal notranslate"><span class="pre">mirror</span></code>, …).</p>
<ul>
<li><p>They are still in place by default, although they now return a reference to the modified object.</p></li>
<li><p>They can return a new object by passing the argument <code class="code docutils literal notranslate"><span class="pre">inplace=False</span></code> or by using the
variants <code class="code docutils literal notranslate"><span class="pre">translated</span></code>, <code class="code docutils literal notranslate"><span class="pre">rotated</span></code>, <code class="code docutils literal notranslate"><span class="pre">mirrored</span></code>.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">rotate</span></code> and <code class="code docutils literal notranslate"><span class="pre">rotated</span></code> requires an <code class="code docutils literal notranslate"><span class="pre">Axis</span></code> object as argument. Old behavior
can be found in <code class="code docutils literal notranslate"><span class="pre">rotate_angles</span></code> and <code class="code docutils literal notranslate"><span class="pre">rotated_angles</span></code>.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">get_immersed_part</span></code> is inplace by default. Use <code class="code docutils literal notranslate"><span class="pre">inplace=False</span></code> to return a new
object.</p></li>
</ul>
</li>
<li><p><code class="code docutils literal notranslate"><span class="pre">add_rotation_dof</span></code> now requires an Axis object.</p></li>
<li><p>New method <code class="code docutils literal notranslate"><span class="pre">tree_view()</span></code> for meshes to display the structure of hierarchical collections of meshes.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">CollectionOfMeshes</span></code> and <code class="code docutils literal notranslate"><span class="pre">SymmetricBodies</span></code> are now subclasses from <code class="code docutils literal notranslate"><span class="pre">tuple</span></code>.
New methods <code class="code docutils literal notranslate"><span class="pre">join_meshes</span></code> to merge several symmetric bodies with the same symmetries as a
single symmetric body.</p></li>
<li><p>Various improvements in <code class="code docutils literal notranslate"><span class="pre">geometric_bodies</span></code> submodule, especially for <code class="code docutils literal notranslate"><span class="pre">Rectangle</span></code> and <code class="code docutils literal notranslate"><span class="pre">RectangularParallelepiped</span></code>.
They can now be generated with reflections symmetries instead of translation symmetries.
New <code class="code docutils literal notranslate"><span class="pre">VerticalCylinder</span></code> class.</p></li>
<li><p>Refactored mesh objects can be checked for equality and are hashable.
The method is experimental and can be improved.</p></li>
</ul>
</section>
</section>
</section>
<section id="new-in-version-0-4-2018-08-04">
<h2>New in version 0.4 (2018-08-04)<a class="headerlink" href="#new-in-version-0-4-2018-08-04" title="Permalink to this heading">¶</a></h2>
<section id="id21">
<h3>New features<a class="headerlink" href="#id21" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Documentation and new usage examples.</p></li>
<li><p>Computation of Kochin coefficients.</p></li>
<li><p>Cleverer helper functions to define degrees of freedom.</p></li>
</ul>
</section>
<section id="id22">
<h3>Major changes<a class="headerlink" href="#id22" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Backward-incompatible change of the way the degrees of freedom are stored.</p></li>
</ul>
</section>
<section id="id23">
<h3>Minor changes<a class="headerlink" href="#id23" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Double precision computations.</p></li>
<li><p>Improvement of <code class="code docutils literal notranslate"><span class="pre">assemble_dataset</span></code> for parametric studies.</p></li>
<li><p>Support clipping of collections of meshes.</p></li>
<li><p>Fixes in geometrical bodies generation.</p></li>
</ul>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><a href="index.html">Table of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="features.html">Features</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="user_manual/index.html">User manual</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="developer_manual/index.html">Developer manual</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="theory_manual/index.html">Theory manual</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="citing.html">Citing</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Changelog</a></li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="citing.html" title="previous chapter">Citing</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/changelog.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022, Matthieu Ancellin.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.3.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/changelog.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>
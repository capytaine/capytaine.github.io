<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>New meshes module &#8212; capytaine 3.0.dev documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=27fed22d" />
    <link rel="stylesheet" type="text/css" href="_static/proof.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <script src="_static/documentation_options.js?v=b5a2bfa9"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <script defer data-domain="capytaine.github.io" src="https://plausible.io/js/script.js"></script>
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  


  </head><body>
  

    <div class="document">
<div id="new-doc-warning-banner" style="width:100%; background-color:#ADD8E6; text-align: center;">This page is part of the documentation of the development version 3.0 of Capytaine.<br><a href="https://capytaine.github.io/stable/">Latest stable version is available here.</a></div>
    
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="new-meshes-module">
<h1>New meshes module<a class="headerlink" href="#new-meshes-module" title="Link to this heading">¶</a></h1>
<section id="main-differences">
<h2>Main differences<a class="headerlink" href="#main-differences" title="Link to this heading">¶</a></h2>
<ul>
<li><p><strong>No in-place mutation of the mesh objects.</strong>
To make the maintenance of the mesh routines easier, all in-place transformation of the objects have been removed.
Code such as the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mesh</span> <span class="o">=</span> <span class="n">cpt</span><span class="o">.</span><span class="n">load_mesh</span><span class="p">(</span><span class="s2">&quot;...&quot;</span><span class="p">)</span>
<span class="n">mesh</span><span class="o">.</span><span class="n">translate_x</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
<span class="n">mesh</span><span class="o">.</span><span class="n">keep_immersed_part</span><span class="p">()</span>
<span class="n">mesh</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>  <span class="c1"># Show translated and clipped mesh</span>
</pre></div>
</div>
<p>can be rewritted as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mesh</span> <span class="o">=</span> <span class="n">cpt</span><span class="o">.</span><span class="n">load_mesh</span><span class="p">(</span><span class="s2">&quot;...&quot;</span><span class="p">)</span>
<span class="n">mesh</span> <span class="o">=</span> <span class="n">mesh</span><span class="o">.</span><span class="n">translated_x</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
<span class="n">mesh</span> <span class="o">=</span> <span class="n">mesh</span><span class="o">.</span><span class="n">immersed_part</span><span class="p">()</span>
<span class="n">mesh</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>or more consisely:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mesh</span> <span class="o">=</span> <span class="n">cpt</span><span class="o">.</span><span class="n">load_mesh</span><span class="p">(</span><span class="s2">&quot;...&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">translated_x</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span><span class="o">.</span><span class="n">immersed_part</span><span class="p">()</span>
<span class="n">mesh</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>In the latter version, each line returns a new Python object of class <code class="docutils literal notranslate"><span class="pre">Mesh</span></code> which is the object now referred to by the variable name <code class="docutils literal notranslate"><span class="pre">mesh</span></code>.
The new version makes it less error prone to have complex workflows such as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">full_mesh</span> <span class="o">=</span> <span class="n">cpt</span><span class="o">.</span><span class="n">load_mesh</span><span class="p">(</span><span class="s2">&quot;...&quot;</span><span class="p">)</span>
<span class="n">full_mesh_draft</span> <span class="o">=</span> <span class="n">full_mesh</span><span class="o">.</span><span class="n">vertices</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
<span class="k">for</span> <span class="n">draft</span> <span class="ow">in</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">]:</span>
    <span class="n">mesh</span> <span class="o">=</span> <span class="n">full_mesh</span><span class="o">.</span><span class="n">translated_z</span><span class="p">(</span><span class="n">full_mesh_draft</span> <span class="o">-</span> <span class="n">draft</span><span class="p">)</span><span class="o">.</span><span class="n">immersed_part</span><span class="p">()</span>
<span class="o">...</span>
</pre></div>
</div>
<p>without any risk to overwriting the original <code class="docutils literal notranslate"><span class="pre">full_mesh</span></code>.</p>
<p>Subsequently, the <code class="docutils literal notranslate"><span class="pre">copy()</span></code> method has been removed.</p>
<p>The only usage of in-place transformations is for performance critical part of the code.
Given that most hydrodynamical meshes are usually below 100k faces, Capytaine’s mesh class is usually not the performance bottleneck.
Computation intensive mesh transformations should be done with a dedicated meshing tool and not directly in Capytaine anyway.
If you find yourself nonetheless struggling with performance issues of the new mesh module in Capytaine, please open an issue on Github.</p>
</li>
<li><p>Different quality checks suite for given meshes.</p></li>
<li><p>Rotations and symmetries are only available around the main axis. The <code class="docutils literal notranslate"><span class="pre">Plane</span></code> and <code class="docutils literal notranslate"><span class="pre">Axis</span></code> objects have been removed.
Most transformation can still be performed by combining translation, rotation and mirroring.
More complex transformations should be done in a dedicated meshing software.</p></li>
<li><p>If no name is provided, no generic name is given to the mesh, no name is used.
Meshes’ names are only useful to keep track of Python objects, since printing the full list of points and faces is not very convenient.</p></li>
<li><p>Default 3D display now uses <code class="docutils literal notranslate"><span class="pre">pyvista</span></code> as a backend instead of raw <code class="docutils literal notranslate"><span class="pre">vtk</span></code>. Please consider installing <code class="docutils literal notranslate"><span class="pre">pyvista</span></code>.
Animation support has not been implemented in this new backend yet, only static mesh viewing is available.
The <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> backend is also still available for static mesh viewing.
Some keyword argument might have been changed to uniformize usage of the two 3D backends.</p></li>
</ul>
</section>
</section>


          </div>
          
        </div>
      </div>

      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">capytaine</a></h1>



<p class="blurb">a Python-based linear potential flow BEM solver</p>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="features.html">Features</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="user_manual/index.html">User manual</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="examples/index.html">Example scripts</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="developer_manual/index.html">Developer manual</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="theory_manual/index.html">Theory manual</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="citing.html">Citing</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2024, Matthieu Ancellin.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="_sources/notes_about_beaking_changes_in_3.0.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>
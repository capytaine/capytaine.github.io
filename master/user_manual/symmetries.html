<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Mesh symmetries &#8212; capytaine 3.0.dev documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=27fed22d" />
    <link rel="stylesheet" type="text/css" href="../_static/proof.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <script src="../_static/documentation_options.js?v=b5a2bfa9"></script>
    <script src="../_static/doctools.js?v=fd6eb6e6"></script>
    <script src="../_static/sphinx_highlight.js?v=6ffebe34"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@4/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Setting up a problem" href="problem_setup.html" />
    <link rel="prev" title="Hydrostatics" href="hydrostatics.html" />
    <script defer data-domain="capytaine.github.io" src="https://plausible.io/js/script.js"></script>
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  


  </head><body>
  

    <div class="document">
<div id="new-doc-warning-banner" style="width:100%; background-color:#ADD8E6; text-align: center;">This page is part of the documentation of the development version 3.0 of Capytaine.<br><a href="https://capytaine.github.io/stable/">Latest stable version is available here.</a></div>
    
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="mesh-symmetries">
<h1>Mesh symmetries<a class="headerlink" href="#mesh-symmetries" title="Link to this heading">¶</a></h1>
<section id="defining-a-symmetric-mesh">
<h2>Defining a symmetric mesh<a class="headerlink" href="#defining-a-symmetric-mesh" title="Link to this heading">¶</a></h2>
<p>Mesh symmetries can be used to speed up the computation.
Four kind of symmetries are supported by Capytaine:</p>
<ul>
<li><p><strong>Single plane symmetry</strong> with respect to the <span class="math notranslate nohighlight">\(x = 0\)</span> or <span class="math notranslate nohighlight">\(y = 0\)</span> plane.
This is the symmetry of most ship hulls and is thus implemented in almost all linear sea-keeping codes.</p>
<blockquote>
<div><p>A mesh with such a symmetry is stored by Capytaine with the
<a class="reference internal" href="../developer_manual/api/capytaine.new_meshes.symmetric_meshes.html#capytaine.new_meshes.symmetric_meshes.ReflectionSymmetricMesh" title="capytaine.new_meshes.symmetric_meshes.ReflectionSymmetricMesh"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReflectionSymmetricMesh</span></code></a> class.
It is defined with an other mesh of the half and a plane (and optionally a name
like the usual meshes):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">half_mesh</span> <span class="o">=</span> <span class="n">cpt</span><span class="o">.</span><span class="n">load_mesh</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">mesh</span> <span class="o">=</span> <span class="n">cpt</span><span class="o">.</span><span class="n">ReflectionSymmetricMesh</span><span class="p">(</span><span class="n">half_mesh</span><span class="p">,</span> <span class="n">plane</span><span class="o">=</span><span class="s2">&quot;xOz&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;my full mesh&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>When loading a file in a format that support defining a symmetry (<cite>gdf</cite>,
<cite>hst</cite>, <cite>mar</cite>, <cite>pnl</cite>), the <code class="docutils literal notranslate"><span class="pre">ReflectionSymmetricMesh</span></code> is returned
automatically by <code class="docutils literal notranslate"><span class="pre">load_mesh</span></code>.</p>
</div></blockquote>
</li>
<li><p><strong>Two plane symmetries</strong> with respect to both the <span class="math notranslate nohighlight">\(x = 0\)</span> and <span class="math notranslate nohighlight">\(y = 0\)</span> plane.</p>
<blockquote>
<div><p>Two vertical plane symmetries can be nested to be used by Capytaine (assuming
that the two planes are orthogonal):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">quarter_mesh</span> <span class="o">=</span> <span class="n">cpt</span><span class="o">.</span><span class="n">load_mesh</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">half_mesh</span> <span class="o">=</span> <span class="n">cpt</span><span class="o">.</span><span class="n">ReflectionSymmetricMesh</span><span class="p">(</span><span class="n">half_mesh</span><span class="p">,</span> <span class="n">plane</span><span class="o">=</span><span class="s2">&quot;yOz&quot;</span><span class="p">)</span>
<span class="n">mesh</span> <span class="o">=</span> <span class="n">cpt</span><span class="o">.</span><span class="n">ReflectionSymmetricMesh</span><span class="p">(</span><span class="n">half_mesh</span><span class="p">,</span> <span class="n">plane</span><span class="o">=</span><span class="s2">&quot;x0z&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p><strong>Rotation symmetry</strong> of a shape repeated by rotation around the <span class="math notranslate nohighlight">\(z\)</span>-axis any number of times.</p>
<blockquote>
<div><p>It can be defined either from the repetition of an existing mesh:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wedge_mesh</span> <span class="o">=</span> <span class="n">cpt</span><span class="o">.</span><span class="n">load_mesh</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">mesh</span> <span class="o">=</span> <span class="n">cpt</span><span class="o">.</span><span class="n">RotationSymmetricMesh</span><span class="p">(</span><span class="n">wedge</span><span class="o">=</span><span class="n">wedge_mesh</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<p>or for an axysymmetric geometry from a list of points along a “meridian” of the shape:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">meridian_points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([(</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">z</span><span class="o">**</span><span class="mi">2</span><span class="p">),</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span> <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)])</span>
<span class="n">sphere</span> <span class="o">=</span> <span class="n">cpt</span><span class="o">.</span><span class="n">RotationSymmetricMesh</span><span class="o">.</span><span class="n">from_profile_points</span><span class="p">(</span><span class="n">meridian_points</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</section>
<section id="manipulating-a-symmetric-mesh">
<h2>Manipulating a symmetric mesh<a class="headerlink" href="#manipulating-a-symmetric-mesh" title="Link to this heading">¶</a></h2>
<p>All the methods defined in the <a class="reference internal" href="mesh.html"><span class="doc">Meshes</span></a> section can be used on the <code class="docutils literal notranslate"><span class="pre">ReflectionSymmetricMesh</span></code> and <code class="docutils literal notranslate"><span class="pre">RotationSymmetricMesh</span></code>.</p>
<p>It the resulting object is not symmetric anymore, the symmetry is lost and a bar <code class="docutils literal notranslate"><span class="pre">Mesh</span></code> of the whole surface is returned:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mesh</span> <span class="o">=</span> <span class="n">cpt</span><span class="o">.</span><span class="n">ReflectionSymmetricMesh</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">plane</span><span class="o">=</span><span class="s2">&quot;xOz&quot;</span><span class="p">)</span>
<span class="n">x_translated_mesh</span> <span class="o">=</span> <span class="n">mesh</span><span class="o">.</span><span class="n">translated_x</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x_translated_mesh</span><span class="o">.</span><span class="vm">__class__</span><span class="p">)</span>  <span class="c1"># ReflectionSymmetricMesh</span>
<span class="n">y_translated_mesh</span> <span class="o">=</span> <span class="n">mesh</span><span class="o">.</span><span class="n">translated_y</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">y_translated_mesh</span><span class="o">.</span><span class="vm">__class__</span><span class="p">)</span>  <span class="c1"># Mesh</span>
</pre></div>
</div>
<p>In particular, joining meshes with <code class="docutils literal notranslate"><span class="pre">+</span></code> or <code class="docutils literal notranslate"><span class="pre">join_meshes</span></code> conserves the symmetry assuming all meshes have the same symmetry.
Clipping the part of the mesh above the free surface with <code class="docutils literal notranslate"><span class="pre">immersed_part</span></code> should always conserve the symmetry.</p>
</section>
<section id="using-a-symmetric-mesh-to-define-a-floating-body">
<h2>Using a symmetric mesh to define a floating body<a class="headerlink" href="#using-a-symmetric-mesh-to-define-a-floating-body" title="Link to this heading">¶</a></h2>
<p>The symmetric mesh can be used to setup a floating body:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mesh</span> <span class="o">=</span> <span class="n">cpt</span><span class="o">.</span><span class="n">ReflectionSymmetricMesh</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">plane</span><span class="o">=</span><span class="s2">&quot;xOz&quot;</span><span class="p">)</span>
<span class="n">lid_mesh</span> <span class="o">=</span> <span class="n">cpt</span><span class="o">.</span><span class="n">ReflectionSymmetricMesh</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">plane</span><span class="o">=</span><span class="s2">&quot;xOz&quot;</span><span class="p">)</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">cpt</span><span class="o">.</span><span class="n">FloatingBody</span><span class="p">(</span>
            <span class="n">mesh</span><span class="o">=</span><span class="n">mesh</span><span class="p">,</span>
            <span class="n">lid_mesh</span><span class="o">=</span><span class="n">lid_mesh</span><span class="p">,</span>
            <span class="n">dofs</span><span class="o">=</span><span class="n">cpt</span><span class="o">.</span><span class="n">rigid_body_dofs</span><span class="p">()</span>
            <span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When using a lid mesh for irregular frequencies removal, the lid mesh and
the hull mesh should have the same symmetry, otherwise the symmetry will be
ignored when solving the BEM problem.
The methods <code class="docutils literal notranslate"><span class="pre">generate_lid</span></code> and <code class="docutils literal notranslate"><span class="pre">extract_lid</span></code> preserve the symmetry,
although the generated lid might not be optimal when the stub of the
symmetric mesh is small.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For all the symmetries described above, the <strong>mesh</strong> (and the lid mesh)
needs to be symmetric, but the full problem might not be.
In other word, even when working with a symmetric mesh, it is possible to
consider incoming waves from any directions, or generalized degrees of
freedom that are not symmetric.</p>
</div>
</section>
<section id="expected-performance-gain">
<h2>Expected performance gain<a class="headerlink" href="#expected-performance-gain" title="Link to this heading">¶</a></h2>
<p>Asymptotically for large problems:</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>Symmetry</p></td>
<td><p>Resolution time</p></td>
<td><p>RAM usage</p></td>
</tr>
<tr class="row-even"><td><p>1 plane symmetry
2 plane symmetries
n rotation symmetry</p></td>
<td><p>1/2
1/4
1/n</p></td>
<td><p>1/2
1/4
1/n</p></td>
</tr>
</tbody>
</table>
<p>Note that the theoretical performance gain described above might not be reached
in practice, especially for smaller problems.
For instance, the threading parallelisation is currently less efficient on
highly symmetric meshes.</p>
</section>
</section>


          </div>
          
        </div>
      </div>

      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">capytaine</a></h1>



<p class="blurb">a Python-based linear potential flow BEM solver</p>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../features.html">Features</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">User manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="installation.html">Installation for users</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="mesh.html">Meshes</a></li>
<li class="toctree-l2"><a class="reference internal" href="body.html">Floating body</a></li>
<li class="toctree-l2"><a class="reference internal" href="multibody.html">Multiple bodies</a></li>
<li class="toctree-l2"><a class="reference internal" href="hydrostatics.html">Hydrostatics</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Mesh symmetries</a></li>
<li class="toctree-l2"><a class="reference internal" href="problem_setup.html">Setting up a problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="resolution.html">Resolution</a></li>
<li class="toctree-l2"><a class="reference internal" href="post_pro.html">Post-processing and collection in dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="export_output.html">Export outputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="conventions.html">Conventions and differences to other codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="fixing_issues.html">Common issues</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Example scripts</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../developer_manual/index.html">Developer manual</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../theory_manual/index.html">Theory manual</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../citing.html">Citing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">User manual</a><ul>
      <li>Previous: <a href="hydrostatics.html" title="previous chapter">Hydrostatics</a></li>
      <li>Next: <a href="problem_setup.html" title="next chapter">Setting up a problem</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2024, Matthieu Ancellin.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 9.1.0</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../_sources/user_manual/symmetries.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>
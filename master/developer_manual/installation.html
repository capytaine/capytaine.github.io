<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Installation for developers &#8212; capytaine 2.3.dev documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css?v=686e5160" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=27fed22d" />
    <link rel="stylesheet" type="text/css" href="../_static/proof.css?v=e9a64e30" />
    <script src="../_static/documentation_options.js?v=7906c0ec"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/proof.js?v=41e9dd12"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Overview of the modules" href="overview.html" />
    <link rel="prev" title="Developer manual" href="index.html" />
    <script defer data-domain="capytaine.github.io" src="https://plausible.io/js/script.js"></script>
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  


  </head><body>
  

    <div class="document">
<div id="new-doc-warning-banner" style="width:100%; background-color:#ADD8E6; text-align: center;">This page is part of the documentation of the development version 2.3 of Capytaine.<br><a href="https://capytaine.github.io/stable/">Latest stable version is available here.</a></div>
    
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="installation-for-developers">
<h1>Installation for developers<a class="headerlink" href="#installation-for-developers" title="Link to this heading">¶</a></h1>
<p>The development of Capytaine mostly happens on Linux or Windows Subsystem for Linux (WSL).
You can find below some instructions to compile Capytaine on macOS or Windows.
These instruction are not updated regularly and might be out-of-date.
Please open an issue on Github if you need help.</p>
<p>Previous versions of this documentation recommended the use of <a class="reference external" href="https://conda.io">Conda</a> (or <a class="reference external" href="https://mamba.readthedocs.io/en/latest/">Mamba</a>) to develop Capytaine.
This is not really necessary on Linux, where it might be simpler and faster to use a PyPI-based workflow.
Conda might nonetheless be useful on Windows in order to install development tools such as <cite>git</cite>, <cite>make</cite> or <cite>gfortran</cite>.</p>
<section id="installation-for-development-using-pip-on-linux-or-wsl">
<h2>Installation for development using <cite>pip</cite> on Linux or WSL<a class="headerlink" href="#installation-for-development-using-pip-on-linux-or-wsl" title="Link to this heading">¶</a></h2>
<p>As of February 2025, the build backend used by Capytaine since version 2.0 (<a class="reference external" href="https://mesonbuild.com/meson-python/index.html">meson-python</a>) is not fully compatible with some modern tools such as <cite>uv</cite> for development (see <a class="reference external" href="https://github.com/astral-sh/uv/issues/10214">https://github.com/astral-sh/uv/issues/10214</a>).</p>
<p>You might need to have Python installed as well as common development tools such as <code class="docutils literal notranslate"><span class="pre">git</span></code>, <code class="docutils literal notranslate"><span class="pre">make</span></code> and <code class="docutils literal notranslate"><span class="pre">gfortran</span></code>.
On Ubuntu or Debian, this can be done with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">python3</span> <span class="n">python3</span><span class="o">-</span><span class="n">pip</span> <span class="n">python3</span><span class="o">-</span><span class="n">venv</span> <span class="n">python</span><span class="o">-</span><span class="ow">is</span><span class="o">-</span><span class="n">python3</span> <span class="n">git</span> <span class="n">make</span> <span class="n">gfortran</span>
</pre></div>
</div>
<p>Get the source code from Github using <code class="docutils literal notranslate"><span class="pre">git</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">capytaine</span><span class="o">/</span><span class="n">capytaine</span>
<span class="n">cd</span> <span class="n">capytaine</span>
</pre></div>
</div>
<p>If you wish to contribute to the project, you might want to create a fork of the project and clone it using the SSH interface (see Github’s documentation for more details).
Let us create a virtual environment in which the development version of Capytaine and its dependencies will be installed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">venv</span> <span class="o">.</span><span class="n">venv</span>
</pre></div>
</div>
<p>Feel free to chose any other directory than the default <code class="docutils literal notranslate"><span class="pre">.venv</span></code>.
Activate the virtual environment with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="o">.</span><span class="n">venv</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">activate</span>  <span class="c1"># with bash shell, change accordingly for e.g. fish</span>
</pre></div>
</div>
<p>To prepare the development environment, we’ll install the required dependencies:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">editable_install_requirements</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>and then build Capytaine in editable mode:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">build</span><span class="o">-</span><span class="n">isolation</span> <span class="o">--</span><span class="n">editable</span> <span class="o">.</span>
</pre></div>
</div>
<p>The above two commands can also be executed by typing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">develop</span>
</pre></div>
</div>
<p>As long as the virtual environment is activated, every import of Capytaine in Python will use the development version in this directory.
All change made to the source code should automatically affects the
installed package. (You may need to restard you Python interpreter, but
rerunning <cite>pip install</cite> should not be necessary.)</p>
<p>Call for instance the following line to check that Capytaine has been correctly installed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">c</span> <span class="s1">&#39;import capytaine as cpt; print(cpt.__version__)&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you have an error of the form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ne">ModuleNotFoundError</span><span class="p">::</span> <span class="n">No</span> <span class="n">module</span> <span class="n">named</span> <span class="s1">&#39;capytaine.green_functions.libs.Delhommeau_float64&#39;</span>
</pre></div>
</div>
<p>when importing Capytaine, it may be because the Python interpreter is
trying to load the content of the local directory <code class="docutils literal notranslate"><span class="pre">capytaine</span></code> (containing
only the source code) and not the actual compiled package.</p>
<p>Running <code class="docutils literal notranslate"><span class="pre">python</span></code> from any other directory on your system should fix the
issue, since there won’t be a local <code class="docutils literal notranslate"><span class="pre">capytaine</span></code> directory to confuse the
module importer.</p>
<p>Alternatively, recent versions of Python (&gt;=3.11) have the <code class="docutils literal notranslate"><span class="pre">-P</span></code> option
which will disable the loading of the local <code class="docutils literal notranslate"><span class="pre">capytaine</span></code> directory.</p>
</div>
</section>
<section id="installation-for-development-using-conda">
<h2>Installation for development using Conda<a class="headerlink" href="#installation-for-development-using-conda" title="Link to this heading">¶</a></h2>
<p>If you are for instance on Windows, it is recommended to use <a class="reference external" href="https://conda.io">Conda</a> (or the alternative implementation with the same user interface <a class="reference external" href="https://mamba.readthedocs.io/en/latest/">Mamba</a>) as package manager and virtual environment manager to install Capytaine for development.
Let us first <a class="reference external" href="https://conda.io/docs/user-guide/tasks/manage-environments.html">create a new virtual environment</a> with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">create</span> <span class="o">--</span><span class="n">name</span> <span class="n">capy_dev</span> <span class="n">python</span> <span class="n">pip</span>
<span class="n">conda</span> <span class="n">activate</span> <span class="n">capy_dev</span>
</pre></div>
</div>
<p>By default, Conda will install the latest version of Python.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">git</span></code> is not available in your environment, you can install it through <code class="docutils literal notranslate"><span class="pre">conda</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">c</span> <span class="n">conda</span><span class="o">-</span><span class="n">forge</span> <span class="n">git</span>
</pre></div>
</div>
<p>Then the source code can be downloaded using <code class="docutils literal notranslate"><span class="pre">git</span></code> with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">capytaine</span><span class="o">/</span><span class="n">capytaine</span>
<span class="n">cd</span> <span class="n">capytaine</span>
</pre></div>
</div>
<p>Alternatively, the source code can be directly downloaded from Github web interface.</p>
<p>Several options are available to get a Fortran compiler.
Please choose below the most relevant to your case.</p>
<details class="summary-gfortran-compiler-on-linux-or-windows-subsystem-for-linux">
<summary>GFortran compiler on Linux or Windows Subsystem for Linux</summary><p>You can install <code class="docutils literal notranslate"><span class="pre">gfortran</span></code> with the package
manager of your distribution. For instance on Debian or Ubuntu:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">gfortran</span>
</pre></div>
</div>
<p>Alternatively, <code class="docutils literal notranslate"><span class="pre">gfortran</span></code> is also available from the <code class="docutils literal notranslate"><span class="pre">conda-forge</span></code>
channel of the Conda package repository:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">c</span> <span class="n">conda</span><span class="o">-</span><span class="n">forge</span> <span class="n">gfortran</span>
</pre></div>
</div>
</details><details class="summary-gfortran-compiler-on-macos">
<summary>GFortran compiler on macOS</summary><p>You can install <code class="docutils literal notranslate"><span class="pre">gfortran</span></code> via <a class="reference external" href="https://brew.sh">Homebrew</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">brew</span> <span class="n">install</span> <span class="n">gcc</span>
</pre></div>
</div>
<p>Make sure that the compilers installed by Homebrew are in you path (e.g.,
<code class="code docutils literal notranslate"><span class="pre">which</span> <span class="pre">gcc</span></code>); this can be accomplished by adding the relevant
directories to your path:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">PATH</span><span class="o">=</span><span class="s2">&quot;/usr/local/bin:$PATH&quot;</span>
</pre></div>
</div>
<p>or through the use of aliases, e.g.,:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">alias</span> <span class="n">gcc</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">gcc</span><span class="o">-</span><span class="mi">10</span>
</pre></div>
</div>
</details><details class="summary-gfortran-on-windows">
<summary>GFortran on Windows</summary><p>The GNU toolchain, including <code class="docutils literal notranslate"><span class="pre">gfortran</span></code> can be installed with the help of <code class="docutils literal notranslate"><span class="pre">conda</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">c</span> <span class="n">conda</span><span class="o">-</span><span class="n">forge</span> <span class="n">m2w64</span><span class="o">-</span><span class="n">toolchain</span>
</pre></div>
</div>
</details><details class="summary-intel-compiler-on-windows">
<summary>Intel compiler on Windows</summary><p>Microsoft Visual Studio is required for linking the Fortran binaries</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="https://visualstudio.microsoft.com/downloads/">https://visualstudio.microsoft.com/downloads/</a></p></li>
<li><p>During installation check the box to include <code class="code docutils literal notranslate"><span class="pre">Desktop</span> <span class="pre">development</span> <span class="pre">with</span> <span class="pre">C++</span></code></p></li>
</ul>
</div></blockquote>
<p>Intel oneAPI HPC toolkit is required for compiling the Fortran binaries (you do not need the base kit)</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="https://www.intel.com/content/www/us/en/developer/tools/oneapi/hpc-toolkit-download.html">https://www.intel.com/content/www/us/en/developer/tools/oneapi/hpc-toolkit-download.html</a></p></li>
<li><p>Install to the default file location</p></li>
</ul>
</div></blockquote>
<p>Create a <code class="docutils literal notranslate"><span class="pre">LIB</span></code> environment variable to point towards the intel directory for compiler <code class="docutils literal notranslate"><span class="pre">.lib</span></code> files</p>
<blockquote>
<div><ul>
<li><p>If oneAPI is installed to the default location, assign the LIB user variable a value of:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">C</span><span class="p">:</span>\<span class="n">Program</span> <span class="n">Files</span> <span class="p">(</span><span class="n">x86</span><span class="p">)</span>\<span class="n">Intel</span>\<span class="n">oneAPI</span>\<span class="n">compiler</span>\<span class="mf">2022.1.0</span>\<span class="n">windows</span>\<span class="n">compiler</span>\<span class="n">lib</span>\<span class="n">intel64_win</span>
</pre></div>
</div>
</li>
<li><p>If oneAPI is installed to a different location then adjust the path above as necessary</p></li>
</ul>
</div></blockquote>
<p>Test if your Fortran compiler was installed correctly by entering <code class="code docutils literal notranslate"><span class="pre">ifort</span></code> on your command line</p>
</details><p>Once you have a Fortran compiler installed, the same instructions as above can be used to install the Python dependencies of Capytaine:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">editable_install_requirements</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>and then build Capytaine in editable mode:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">build</span><span class="o">-</span><span class="n">isolation</span> <span class="o">--</span><span class="n">editable</span> <span class="o">.</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">make</span></code> is not available in your environment, you can install it through <code class="docutils literal notranslate"><span class="pre">conda</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">c</span> <span class="n">conda</span><span class="o">-</span><span class="n">forge</span> <span class="n">make</span>
</pre></div>
</div>
<p>and simply use the following line to install Capytaine in editable mode in your conda environment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">develop</span>
</pre></div>
</div>
<p>You can check that the package is installed by running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">c</span> <span class="s1">&#39;import capytaine as cpt; print(cpt.__version__)&#39;</span>
</pre></div>
</div>
</section>
<section id="building-the-documentation">
<h2>Building the documentation<a class="headerlink" href="#building-the-documentation" title="Link to this heading">¶</a></h2>
<p>In a <code class="docutils literal notranslate"><span class="pre">pip</span></code> or <code class="docutils literal notranslate"><span class="pre">conda</span></code> virtual environment (which can be the same as above or a different one), install Capytaine in editable mode with the extra dependencies:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">editable_install_requirements</span><span class="o">.</span><span class="n">txt</span>
<span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">build</span><span class="o">-</span><span class="n">isolation</span> <span class="o">--</span><span class="n">editable</span> <span class="o">.</span><span class="p">[</span><span class="n">optional</span><span class="p">,</span><span class="n">docs</span><span class="p">]</span>
</pre></div>
</div>
<p>if you want to edit the code of Capytaine, or install Capytaine directly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">.</span><span class="p">[</span><span class="n">optional</span><span class="p">,</span><span class="n">docs</span><span class="p">]</span>
</pre></div>
</div>
<p>if you only care about the documentation.</p>
<p>Then run the <code class="docutils literal notranslate"><span class="pre">make</span></code> command in the <code class="docutils literal notranslate"><span class="pre">docs/</span></code> directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">docs</span><span class="o">/</span>
<span class="n">make</span>
</pre></div>
</div>
<p>and the documentation will be built in the <code class="docutils literal notranslate"><span class="pre">docs/_build</span></code> directory.</p>
</section>
</section>


          </div>
          
        </div>
      </div>

      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">capytaine</a></h1>



<p class="blurb">a Python-based linear potential flow BEM solver</p>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../features.html">Features</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user_manual/index.html">User manual</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developer manual</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Installation for developers</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview.html">Overview of the modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html">Testing Capytaine</a></li>
<li class="toctree-l2"><a class="reference internal" href="making_a_release.html">Making a release</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/modules.html">API documentation</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../theory_manual/index.html">Theory manual</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../citing.html">Citing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Developer manual</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Developer manual</a></li>
      <li>Next: <a href="overview.html" title="next chapter">Overview of the modules</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2024, Matthieu Ancellin.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.0</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../_sources/developer_manual/installation.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>